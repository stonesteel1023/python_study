{% extends 'base.htm' %}

{% block body %}
<div id="register">
    <div class="container">
    <br>
    <h3 class="text-center text-danger">회원가입</h3><br>
      <div class="form-group col-md-6">
        <label for="username" class="text-danger">Username:</label><br>
        <input type="text" name="username" id="username" class="form-control">
      </div>
      <div class="form-group col-md-6">
        <label for="username" class="text-danger">email:</label><br>
        <input type="text" name="email" id="email" class="form-control">
        <small id="emailHelp" class="form-text text-muted">이메일을 공유하지 마세요</small>
    </div>
      <div class="form-group col-md-6">
        <label for="password" class="text-danger">Password:</label><br>
        <input type="password" name="password" id="password" class="form-control">
      </div>
      <div class="form-group col-md-6">
        <div class="row">
          <input type="submit" id="loginButton" class="form-control btn btn-danger" value="submit">
        </div>
      </div>
      <div class="form-group col-md-6">
        <div class="row">
          <input type="register" id="register" class="form-control btn btn-danger" value="regist here">
        </div>
        <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
      </div>
      </div>
</div>
<script>
    $(document).ready(function () {
        $('#register').click(function () {
            $.post('/apis/v1/users/create/', 
            {'username': $('#username').val(),
            'email': $('#email').val(),
            'password': $('#password').val()},
        function(){
            window.location = "{% url 'login' %}"
        }).fail(function(data){
            alert(data.responseJSON.message);
        });
    });
    });
    </script>
{% endblock %}